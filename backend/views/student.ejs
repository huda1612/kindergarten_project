<!-- student.html -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة الطالب</title>
    <link rel="stylesheet" href="student.css">
    <script defer src="student.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- الشريط العلوي -->
    <nav>
        <div class="school-info">
            <i class="fas fa-school school-icon"></i>
            <span>روضة دار الفرح الخاصة</span>
        </div>
        
        <div class="student-info">
            <span class="student-name"> <%= name_With_Nikname %> </span>
            <a class="logout-btn"  href="/logout">تسجيل الخروج</a>
        </div>
    </nav>
    
    <!-- الهيكل الرئيسي -->
    <div class="container">
        <!-- القائمة الجانبية -->
        <div class="sidebar">
            <p>قائمة الأقسام</p>
            <a class="menu-item" href="#stu"><i class="fas fa-child"></i><span>معلومات الطالب</span></a>
            <a class="menu-item" href="../Teacher page/teacher.html"><i class="fas fa-puzzle-piece"></i><span>الأنشطة  </span></a>
            <a class="menu-item" href="../Daily report page/index.html"><i class="fas fa-file"></i><span> الملفات</span></a>
            <a class="menu-item" href=""><i class="fas fa-sticky-note"></i><span> ملاحظات الأسبوع</span></a>

        </div>

        <!-- المحتوى الرئيسي -->
        <div class="main-content">
            <!-- مربع الترحيب -->
            <div class="welcome-box">
                <h2>مرحباً بك،<%= name_With_Nikname %></h2>
                <p id="today-date"></p>
            </div>

            <!-- المربعات الإحصائية -->
             <h3 id="stu"> معلومات الطالب : </h3>
            <div class="stats-container">
                
                <div class="box1">
                    <i class="fas fa-child"></i>
                    <div>الاسم :</div>
                    <div class="stat-value"><%= name_With_Nikname %> </div>
                </div>
                <div class="box2">
                    <i class="fas fa-user-graduate"></i>
                    <div>فئة الطالب:<% if (typeof gradeLevelName !== 'undefined' && gradeLevelName) { %><%= gradeLevelName %><% } %></div>
                    <div class="stat-value">  اسم الصف: <%= class_Name %> </div>

                </div>
                <div class="box3">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <div>اسم المربية المشرفة:</div>
                    <div class="stat-value"><%= teacher_Name %> </div>
                </div>
                <div class="box4">
                    <i class="fas fa-user-times"></i>
                    <div>عدد الغيابات:</div>
                    <div class="stat-value"><%= absenceCount %></div>
                </div>
            </div>
    <!-- الخبرة الحالية -->
<div class="current-experience-section">
    <h3 class="section-title">الخبرة الحالية للصف:</h3>
    <% if (currentExperience && currentExperience.experience_name) { %>
        <p class="experience-name"><%= currentExperience.experience_name %></p>
    <% } else { %>
        <p class="no-experience">لم يتم تحديد خبرة حالية للصف</p>
    <% } %>
</div>
            <!-- أنشطة اليوم -->
<div class="activities-section">
    <div class="section-title" style="display:flex; align-items:center; gap:10px;">
        <h3 style="margin:0;">أنشطة اليوم</h3>
        <button id="showActivitiesByDateBtn" class="add-btn" type="button">عرض أنشطة يوم آخر</button>
        <form id="activitiesByDateForm" style="display:none; margin:10px 0;">
            <select id="actsDay"></select>
            <select id="actsMonth"></select>
            <select id="actsYear"></select>
            <button type="button" id="showActivitiesBtn" class="add-btn">عرض</button>
            <button type="button" id="cancelShowActivitiesBtn" class="add-btn">إلغاء</button>
        </form>
    </div>
    <div class="activities-list" id="activitiesList">
        <div id="todayActivities"></div>
    </div>
</div>
            
 <!--هي بس لاخد رقم الصف بملف الjs-->
 <div id="get_class_id" data-class-id="<%= classId %>"></div>

<!-- قسم الملفات -->
<section class="section-box">
<!-- قسم الملفات -->
    <div class="files-section">
        <div class="section-title">
            <h3 id="file">ملفات اليوم</h3>

            <button class="add-btn" id="fileDatebtn">عرض ملفات يوم اخر</button>
            <form id="fileDateForm" style="display:none;">
                <select id="day" name="day"> </select>
                <select id="month" name="month"> </select>
                <select id="year" name="year"> </select>
                <button type="button" class="add-btn" id="dateSelectFilebtn">عرض</button>
                <button type="button" class="add-btn" id="cencelDateSelectFilebtn">إلغاء</button>
            </form>
        </div>


        <div class="files-list">
            <div id="todayFiles"></div>
        </div>



    </div>
 
</section>


<!-- ملاحظات الأسبوع -->
<section class="section-box">
    <h3>ملاحظات الأسبوع:</h3>
    <table>
      <thead>
        <tr>
          <th>التاريخ</th>
          <th>الملاحظة</th>
        </tr>
      </thead>
      <tbody id="weekly-notes-body">
        <!-- سيتم تعبئته من student.js -->
      </tbody>
    </table>
  </section>
        </div>
    </div>
</body>
</html>


<script>
        //قائمة عرض توايخ السنه
    const daySelect = document.getElementById("day");
    const monthSelect = document.getElementById("month");
    const yearSelect = document.getElementById("year");

    // تعبئة الأيام (1 إلى 31)
    for (let i = 1; i <= 31; i++) {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = i;
        daySelect.appendChild(option);
    }

    // أسماء الشهور بالعربي
    const monthNames = [
        "يناير", "فبراير", "مارس", "أبريل", "مايو", "يونيو",
        "يوليو", "أغسطس", "سبتمبر", "أكتوبر", "نوفمبر", "ديسمبر"
    ];

    // تعبئة الشهور
    monthNames.forEach((month, index) => {
        const option = document.createElement("option");
        option.value = index + 1; // القيم من 1 إلى 12
        option.textContent = month;
        monthSelect.appendChild(option);
    });

    // تعبئة السنوات (السنة الحالية والسنة الماضية فقط)
    const thisYear = new Date().getFullYear();
    const years = [thisYear, thisYear - 1];

    years.forEach(year => {
        const option = document.createElement("option");
        option.value = year;
        option.textContent = year;
        yearSelect.appendChild(option);
    });

</script>